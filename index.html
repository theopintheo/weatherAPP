<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-1: #0f172a;
      --bg-2: #0b1220;
      --accent: rgba(255,255,255,0.12);
      --text: #e6eef8;
    }

    body{
      font-family: 'Poppins', sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      box-sizing: border-box;
      color: var(--text);
      background: radial-gradient(circle at 12% 10%, rgba(255,255,255,0.03), transparent 18%), linear-gradient(135deg, var(--bg-1), var(--bg-2));
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background 400ms ease, color 200ms ease;
      overflow: auto;
    }

    .weather-app{background:var(--accent);backdrop-filter:blur(10px);border-radius:20px;padding:30px;max-width:420px;width:92%;box-shadow:0 8px 25px rgba(0,0,0,0.22);color:#fff;text-align:center;position:relative;overflow:visible}

    h1{font-size:28px;margin-bottom:12px}

    .search-box{display:flex;margin-bottom:18px}
  .search-box input{flex:1;padding:12px;border:none;border-radius:50px 0 0 50px;font-size:16px}
  .search-box button{padding:12px 20px;border:none;border-radius:0 50px 50px 0;background:#ff9800;color:#fff;font-weight:700;cursor:pointer;transition:transform .18s ease,background .25s}
  #use-location{border-radius:50px}
    .search-box button:hover{transform:translateY(-2px);background:#e68900}

    .weather-info{margin-top:14px}

    
    .temp{font-size:48px;font-weight:700;letter-spacing:-1px;transition:transform 600ms cubic-bezier(.2,.9,.2,1)}
    .description{font-size:20px;margin:8px 0;text-transform:capitalize}

   
    .fade-in{opacity:0;transform:translateY(8px);transition:opacity .45s ease,transform .45s cubic-bezier(.2,.9,.2,1)}
    .visible{opacity:1;transform:translateY(0)}


  </style>
</head>
<body>
  <div class="weather-app">
    <h1>Weather Dashboard</h1>
    <div class="search-box">
      <input type="text" id="city-input" placeholder="Enter city name">
      <button onclick="getWeather()">Search</button>
      <button id="use-location" onclick="getLocation()" style="margin-left:8px;background:#4caf50">Use my location</button>
    </div>

    <p id="demo" style="margin-top:6px;font-size:13px;opacity:0.9"></p>

    <div id="weather" class="weather-info">
      <p>Enter a city to see weather</p>
    </div>
  </div>

  <script>
    const API_KEY = "dc7c5357ae98dfa039a80f7aa8a43506";
    let lastTemp = null;
    async function getWeather(){
      const city = document.getElementById('city-input').value.trim();
      if(!city){alert('Please enter a city name');return}
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`;
      try{
        const res = await fetch(url);
        if(!res.ok) throw new Error('City not found');
        const data = await res.json();
        showWeather(data);
      }catch(err){
        document.getElementById('weather').innerHTML = `<p style="color:#ffcccc;">Error: ${err.message}</p>`;
      }
    }

    function showWeather(data){
      const weatherDiv = document.getElementById('weather');

      weatherDiv.innerHTML = `
        
        <div class="temp fade-in" id="temp">${Math.round(data.main.temp)}°C</div>
        <div class="description fade-in" id="desc">${data.weather[0].description}</div>
        <div class="extra fade-in">
          <div>Feels Like: ${Math.round(data.main.feels_like)}°C</div>
          <div>Humidity: ${data.main.humidity}%</div>
          <div>Wind: ${data.wind.speed} m/s</div>
        </div>
      `;

      requestAnimationFrame(()=>{document.querySelectorAll('.fade-in').forEach(el=>el.classList.add('visible'))});

      const target = Math.round(data.main.temp);
      animateTemp(target);

    }


    function getLocation(){
      const x = document.getElementById('demo');
      if(!x) return;
      if(navigator.geolocation){
        x.textContent = 'Requesting location...';
        navigator.geolocation.getCurrentPosition(showPosition, (err)=>{ x.textContent = 'Location permission denied or unavailable.' });
      } else {
        x.textContent = 'Geolocation is not supported by this browser.';
      }
    }

    function showPosition(position){
      const x = document.getElementById('demo');
      if(x) x.innerHTML = 'Latitude: ' + position.coords.latitude+ '<br>Longitude: ' + position.coords.longitude;
   
      getWeatherByCoords(position.coords.latitude, position.coords.longitude);
    }

    async function getWeatherByCoords(lat, lon){
      try{
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;
        const res = await fetch(url);
        if(!res.ok) throw new Error('Unable to fetch weather for your location');
        const data = await res.json();
        showWeather(data);
      }catch(err){
        const x = document.getElementById('demo'); if(x) x.textContent = 'Failed to fetch weather for your location.';
      }
    }

  </script>
</body>
</html>
